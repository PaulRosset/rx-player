"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var primitives_1 = require("../primitives");
function getSpacer(spacing) {
    if (spacing === 'compact')
        return compactSpacer;
    if (spacing === 'preserve')
        return preserveSpacer;
    return spacing;
}
exports.default = getSpacer;
function compactSpacer(lines) {
    return lines
        .map(function (_a) {
        var description = _a.tokens.description;
        return description.trim();
    })
        .filter(function (description) { return description !== ''; })
        .join(' ');
}
function preserveSpacer(lines) {
    if (lines.length === 0)
        return '';
    if (lines[0].tokens.description === '' &&
        lines[0].tokens.delimiter === primitives_1.Markers.start)
        lines = lines.slice(1);
    var lastLine = lines[lines.length - 1];
    if (lastLine !== undefined &&
        lastLine.tokens.description === '' &&
        lastLine.tokens.end.endsWith(primitives_1.Markers.end))
        lines = lines.slice(0, -1);
    return lines
        .map(function (_a) {
        var tokens = _a.tokens;
        return (tokens.delimiter === ''
            ? tokens.start
            : tokens.postDelimiter.slice(1)) + tokens.description;
    })
        .join('\n');
}
