{"id":"../../../parsers/manifest/dash/get_clock_offset.ts","dependencies":[{"name":"/home/prosset/Documents/Canal+/rx-player/tsconfig.json","includedInParent":true,"mtime":1567699906905},{"name":"/home/prosset/Documents/Canal+/rx-player/package.json","includedInParent":true,"mtime":1571390912278},{"name":"../../../log","loc":{"line":21,"column":38},"parent":"/home/prosset/Documents/Canal+/rx-player/src/parsers/manifest/dash/get_clock_offset.ts","resolved":"/home/prosset/Documents/Canal+/rx-player/src/log.ts"}],"generated":{"js":"\"use strict\";\n/**\n * Copyright 2015 CANAL+ Group\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar log_1 = __importDefault(require(\"../../../log\"));\n/**\n * Get difference between the server's clock, in milliseconds and the return of\n * the JS function `performance.now`.\n * This property allows to calculate the server time at any moment.\n *\n * `undefined` if we could not define such offset (in which case, you could have\n * to rely on the user's clock instead).\n *\n * For example, a response of 1000 would mean that performance.now() is 1 second\n * behind the server's time.\n * @param {string} serverClock\n * @returns {number|undefined}\n */\n\n\nfunction getClockOffset(serverClock) {\n  var httpOffset = Date.parse(serverClock) - performance.now();\n\n  if (isNaN(httpOffset)) {\n    log_1.default.warn(\"DASH Parser: Invalid clock received: \", serverClock);\n    return undefined;\n  }\n\n  return httpOffset;\n}\n\nexports.default = getClockOffset;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":4}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":9}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":12}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":27}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":28}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":35}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":36}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":50}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":51}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":28,"column":52}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":29,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":44,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":24},"generated":{"line":44,"column":9}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":44,"column":23}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":33,"column":2},"generated":{"line":44,"column":24}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":44,"column":35}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":33,"column":22},"generated":{"line":44,"column":37}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":45,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":45,"column":6}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":18},"generated":{"line":45,"column":16}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":21},"generated":{"line":45,"column":19}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":25},"generated":{"line":45,"column":23}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":26},"generated":{"line":45,"column":24}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":21},"generated":{"line":45,"column":29}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":32},"generated":{"line":45,"column":30}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":21},"generated":{"line":45,"column":41}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":47},"generated":{"line":45,"column":45}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":58},"generated":{"line":45,"column":56}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":59},"generated":{"line":45,"column":57}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":47},"generated":{"line":45,"column":60}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":45,"column":62}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":47,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":6},"generated":{"line":47,"column":6}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":47,"column":11}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":47,"column":12}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":47,"column":22}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":47,"column":23}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":36,"column":25},"generated":{"line":47,"column":25}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":4}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":9}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":10}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":17}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":8},"generated":{"line":48,"column":18}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":22}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":48,"column":23}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":62}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":55},"generated":{"line":48,"column":64}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":48,"column":75}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":49,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":38,"column":11},"generated":{"line":49,"column":11}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":49,"column":20}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":39,"column":3},"generated":{"line":50,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":52,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":52,"column":9}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":52,"column":19}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":41,"column":1},"generated":{"line":53,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":55,"column":0}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":55,"column":7}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":55,"column":8}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":55,"column":15}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":55,"column":18}},{"source":"../../../parsers/manifest/dash/get_clock_offset.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":55,"column":32}}],"sources":{"../../../parsers/manifest/dash/get_clock_offset.ts":"/**\n * Copyright 2015 CANAL+ Group\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport log from \"../../../log\";\n\n/**\n * Get difference between the server's clock, in milliseconds and the return of\n * the JS function `performance.now`.\n * This property allows to calculate the server time at any moment.\n *\n * `undefined` if we could not define such offset (in which case, you could have\n * to rely on the user's clock instead).\n *\n * For example, a response of 1000 would mean that performance.now() is 1 second\n * behind the server's time.\n * @param {string} serverClock\n * @returns {number|undefined}\n */\nexport default function getClockOffset(\n  serverClock : string\n) : number|undefined {\n  const httpOffset = Date.parse(serverClock) - performance.now();\n  if (isNaN(httpOffset)) {\n    log.warn(\"DASH Parser: Invalid clock received: \",  serverClock);\n    return undefined;\n  }\n  return httpOffset;\n}\n"},"lineCount":null}},"error":null,"hash":"fbe58e8b23405341922d42011f518db5","cacheData":{"env":{}}}