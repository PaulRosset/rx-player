{"id":"../../../core/pipelines/segment/prioritizer.ts","dependencies":[{"name":"/home/prosset/Documents/Canal+/rx-player/tsconfig.json","includedInParent":true,"mtime":1567699906905},{"name":"/home/prosset/Documents/Canal+/rx-player/package.json","includedInParent":true,"mtime":1571390912278},{"name":"rxjs","loc":{"line":21,"column":23},"parent":"/home/prosset/Documents/Canal+/rx-player/src/core/pipelines/segment/prioritizer.ts","resolved":"/home/prosset/Documents/Canal+/rx-player/node_modules/rxjs/_esm5/index.js"},{"name":"rxjs/operators","loc":{"line":22,"column":28},"parent":"/home/prosset/Documents/Canal+/rx-player/src/core/pipelines/segment/prioritizer.ts","resolved":"/home/prosset/Documents/Canal+/rx-player/node_modules/rxjs/_esm5/operators/index.js"},{"name":"../../../utils/array_find_index","loc":{"line":23,"column":51},"parent":"/home/prosset/Documents/Canal+/rx-player/src/core/pipelines/segment/prioritizer.ts","resolved":"/home/prosset/Documents/Canal+/rx-player/src/utils/array_find_index.ts"}],"generated":{"js":"\"use strict\";\n/**\n * Copyright 2015 CANAL+ Group\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar operators_1 = require(\"rxjs/operators\");\n\nvar array_find_index_1 = __importDefault(require(\"../../../utils/array_find_index\"));\n/**\n * Create Observables which can be priorized between one another.\n *\n * With this class, you can create Observables with linked priority numbers.\n * The lower this number is, the more priority the resulting Observable will\n * have.\n *\n * Such Observable will then basically wait for pending Observables with more\n * priority to finish before \"starting\".\n *\n * You can also update the priority of an already-created Observable.\n * This will only have an effect if the Observable is currently \"waiting\" for\n * its turn (started observable won't be canceled if their priority were\n * lowered).\n *\n * ```js\n * const prioritizer = new ObservablePrioritizer();\n *\n * const observable1 = Observable.of(1);\n * const observable2 = Observable.of(2);\n * const observable3 = Observable.of(3);\n * const observable4 = Observable.of(4);\n * const observable5 = Observable.of(5);\n *\n * const pObservable1 = prioritizer.create(observable1, 4);\n * const pObservable2 = prioritizer.create(observable2, 2);\n * const pObservable3 = prioritizer.create(observable3, 1);\n * const pObservable4 = prioritizer.create(observable4, 3);\n * const pObservable5 = prioritizer.create(observable5, 2);\n *\n * // start every Observables at the same time\n * observableMerge(\n *   pObservable1,\n *   pObservable2,\n *   pObservable3,\n *   pObservable4,\n *   pObservable5\n * ).subscribe((i) => {\n *   // To spice things up, update pObservable1 priority to go before\n *   // pObservable4\n *   if (i === 5) { // if pObservable5 is currently emitting\n *     prioritizer.updatePriority(pObservable1, 1);\n *   }\n *   console.log(i);\n * });\n *\n * // Result:\n * // 3\n * // 2\n * // 5\n * // 1\n * // 4\n *\n * // Note: here \"1\" goes before \"4\" only because the former's priority has been\n * // updated before the latter was started.\n * // It would be the other way around if not.\n * ```\n *\n * @class ObservablePrioritizer\n */\n\n\nvar ObservablePrioritizer =\n/*#__PURE__*/\nfunction () {\n  function ObservablePrioritizer() {\n    _classCallCheck(this, ObservablePrioritizer);\n\n    this._pendingPriority = null;\n    this._numberOfPendingObservables = 0;\n    this._queue = [];\n  }\n  /**\n   * Create a priorized Observable from a base Observable.\n   *\n   * When subscribed to, this Observable will have its priority compared to\n   * all the already-running Observables created from this class.\n   * Only if this number is inferior or equal to the priority of the\n   * currently-running Observables will it be immediately started.\n   * In the opposite case, we will wait for higher-priority Observables to\n   * finish before starting it.\n   *\n   * Note that while this Observable is waiting for its turn, it is possible\n   * to update its property through the updatePriority method, by providing\n   * the Observable returned by this function and its new priority number.\n   *\n   * @param {Observable} obs\n   * @param {number} priority\n   * @returns {Observable}\n   */\n\n\n  _createClass(ObservablePrioritizer, [{\n    key: \"create\",\n    value: function create(obs, priority) {\n      var _this = this;\n\n      var pObs$ = rxjs_1.defer(function () {\n        if (_this._pendingPriority == null || _this._pendingPriority >= priority) {\n          // Update the priority and start immediately the Observable\n          _this._pendingPriority = priority;\n          return _this._startObservable(obs);\n        } else {\n          var trigger = new rxjs_1.Subject();\n\n          _this._queue.push({\n            observable: pObs$,\n            priority: priority,\n            trigger: trigger\n          });\n\n          return trigger.pipe(operators_1.mergeMap(function () {\n            return _this._startObservable(obs);\n          }));\n        }\n      });\n      return pObs$;\n    }\n    /**\n     * Update the priority of an Observable created through the create method.\n     *\n     * Note that this will only have an effect on Observable which are not yet\n     * started.\n     * This means it will only have an effect on:\n     *   - unsubscribed Observables\n     *   - Observables waiting for Observables with an higher priority to\n     *     finish\n     *\n     * @param {Observable} obs\n     * @param {number} priority\n     */\n\n  }, {\n    key: \"updatePriority\",\n    value: function updatePriority(obs, priority) {\n      var index = array_find_index_1.default(this._queue, function (elt) {\n        return elt.observable === obs;\n      });\n\n      if (index < 0) {\n        return;\n      }\n\n      var queueElement = this._queue[index];\n      queueElement.priority = priority;\n\n      if (this._pendingPriority == null || this._pendingPriority >= priority) {\n        this._queue.splice(index, 1);\n\n        queueElement.trigger.next();\n        queueElement.trigger.complete();\n      }\n    }\n  }, {\n    key: \"_startObservable\",\n    value: function _startObservable(obs) {\n      var _this2 = this;\n\n      var onObservableFinish = function onObservableFinish() {\n        _this2._numberOfPendingObservables--;\n\n        if (_this2._numberOfPendingObservables > 0) {\n          // still waiting for Observables to finish\n          return;\n        }\n\n        _this2._pendingPriority = null;\n\n        if (_this2._queue.length === 0) {\n          return;\n        }\n\n        _this2._pendingPriority = _this2._queue.reduce(function (acc, elt) {\n          return acc == null || acc > elt.priority ? elt.priority : acc;\n        }, null);\n\n        for (var i = 0; i < _this2._queue.length; i++) {\n          var elt = _this2._queue[i];\n\n          if (elt.priority === _this2._pendingPriority) {\n            _this2._queue.splice(i, 1);\n\n            i--;\n            elt.trigger.next();\n            elt.trigger.complete();\n          }\n        }\n      };\n\n      this._numberOfPendingObservables++;\n      return obs.pipe(operators_1.finalize(onObservableFinish));\n    }\n  }]);\n\n  return ObservablePrioritizer;\n}();\n\nexports.default = ObservablePrioritizer;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":4}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":27}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":34,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":4}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":26}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":36,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":4}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":41}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":48}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":49}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":82}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":83}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":38,"column":84}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":39,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":21},"generated":{"line":101,"column":4}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":104,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":104,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":105,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":107,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":115,"column":9},"generated":{"line":107,"column":9}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":107,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":115,"column":28},"generated":{"line":107,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":107,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":116,"column":4},"generated":{"line":108,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":116,"column":9},"generated":{"line":108,"column":9}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":116,"column":4},"generated":{"line":108,"column":36}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":116,"column":39},"generated":{"line":108,"column":39}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":116,"column":4},"generated":{"line":108,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":109,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":117,"column":9},"generated":{"line":109,"column":9}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":109,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":117,"column":18},"generated":{"line":109,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":109,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":118,"column":3},"generated":{"line":110,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":120,"column":2},"generated":{"line":111,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":138,"column":16},"generated":{"line":133,"column":27}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":138,"column":37},"generated":{"line":133,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":138,"column":54},"generated":{"line":133,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":138,"column":54},"generated":{"line":134,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":4},"generated":{"line":136,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":10},"generated":{"line":136,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":15},"generated":{"line":136,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":18},"generated":{"line":136,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":18},"generated":{"line":136,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":18},"generated":{"line":136,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":18},"generated":{"line":136,"column":30}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":34},"generated":{"line":136,"column":31}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":39},"generated":{"line":136,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":6},"generated":{"line":137,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":10},"generated":{"line":137,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":14},"generated":{"line":137,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":15},"generated":{"line":137,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":10},"generated":{"line":137,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":35},"generated":{"line":137,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":10},"generated":{"line":137,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":43},"generated":{"line":137,"column":46}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":47},"generated":{"line":137,"column":51}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":48},"generated":{"line":137,"column":52}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":43},"generated":{"line":137,"column":68}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":68},"generated":{"line":137,"column":72}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":6},"generated":{"line":137,"column":80}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":78},"generated":{"line":137,"column":82}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":141,"column":8},"generated":{"line":138,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":139,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":139,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":12},"generated":{"line":139,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":13},"generated":{"line":139,"column":16}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":139,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":32},"generated":{"line":139,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":139,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":8},"generated":{"line":140,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":15},"generated":{"line":140,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":19},"generated":{"line":140,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":20},"generated":{"line":140,"column":23}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":15},"generated":{"line":140,"column":39}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":37},"generated":{"line":140,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":15},"generated":{"line":140,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":143,"column":8},"generated":{"line":140,"column":44}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":144,"column":7},"generated":{"line":141,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":140,"column":6},"generated":{"line":141,"column":9}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":144,"column":13},"generated":{"line":141,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":8},"generated":{"line":142,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":14},"generated":{"line":142,"column":14}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":21},"generated":{"line":142,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":24},"generated":{"line":142,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":28},"generated":{"line":142,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":28},"generated":{"line":142,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":28},"generated":{"line":142,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":24},"generated":{"line":142,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":145,"column":8},"generated":{"line":142,"column":44}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":8},"generated":{"line":144,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":8},"generated":{"line":144,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":12},"generated":{"line":144,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":13},"generated":{"line":144,"column":16}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":8},"generated":{"line":144,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":20},"generated":{"line":144,"column":23}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":8},"generated":{"line":144,"column":27}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":25},"generated":{"line":144,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":27},"generated":{"line":145,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":27},"generated":{"line":145,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":37},"generated":{"line":145,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":39},"generated":{"line":145,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":25},"generated":{"line":145,"column":29}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":46},"generated":{"line":146,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":46},"generated":{"line":146,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":54},"generated":{"line":146,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":46},"generated":{"line":146,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":25},"generated":{"line":146,"column":30}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":56},"generated":{"line":147,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":56},"generated":{"line":147,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":63},"generated":{"line":147,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":56},"generated":{"line":147,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":25},"generated":{"line":148,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":146,"column":8},"generated":{"line":148,"column":11}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":147,"column":8},"generated":{"line":150,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":147,"column":15},"generated":{"line":150,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":147,"column":22},"generated":{"line":150,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":11},"generated":{"line":150,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":147,"column":15},"generated":{"line":150,"column":29}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":16},"generated":{"line":150,"column":30}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":16},"generated":{"line":150,"column":41}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":16},"generated":{"line":150,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":16},"generated":{"line":150,"column":50}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":25},"generated":{"line":150,"column":51}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":25},"generated":{"line":151,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":31},"generated":{"line":151,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":35},"generated":{"line":151,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":36},"generated":{"line":151,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":31},"generated":{"line":151,"column":41}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":53},"generated":{"line":151,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":31},"generated":{"line":151,"column":45}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":25},"generated":{"line":151,"column":46}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":25},"generated":{"line":152,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":148,"column":16},"generated":{"line":152,"column":11}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":147,"column":15},"generated":{"line":152,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":147,"column":8},"generated":{"line":152,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":149,"column":7},"generated":{"line":153,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":150,"column":5},"generated":{"line":154,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":18},"generated":{"line":154,"column":7}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":139,"column":4},"generated":{"line":154,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":151,"column":4},"generated":{"line":155,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":151,"column":11},"generated":{"line":155,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":151,"column":4},"generated":{"line":155,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":152,"column":3},"generated":{"line":156,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":154,"column":2},"generated":{"line":157,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":167,"column":24},"generated":{"line":173,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":167,"column":45},"generated":{"line":173,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":167,"column":62},"generated":{"line":173,"column":50}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":4},"generated":{"line":174,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":10},"generated":{"line":174,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":15},"generated":{"line":174,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":18},"generated":{"line":174,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":18},"generated":{"line":174,"column":36}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":18},"generated":{"line":174,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":18},"generated":{"line":174,"column":44}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":33},"generated":{"line":174,"column":45}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":38},"generated":{"line":174,"column":50}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":18},"generated":{"line":174,"column":56}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":33},"generated":{"line":174,"column":58}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":34},"generated":{"line":174,"column":68}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":33},"generated":{"line":174,"column":71}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":33},"generated":{"line":175,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":42},"generated":{"line":175,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":45},"generated":{"line":175,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":46},"generated":{"line":175,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":42},"generated":{"line":175,"column":29}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":61},"generated":{"line":175,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":33},"generated":{"line":175,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":169,"column":33},"generated":{"line":176,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":18},"generated":{"line":176,"column":7}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":168,"column":4},"generated":{"line":176,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":171,"column":4},"generated":{"line":178,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":171,"column":8},"generated":{"line":178,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":171,"column":13},"generated":{"line":178,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":171,"column":16},"generated":{"line":178,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":171,"column":4},"generated":{"line":178,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":171,"column":19},"generated":{"line":178,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":172,"column":6},"generated":{"line":179,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":173,"column":5},"generated":{"line":180,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":4},"generated":{"line":182,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":10},"generated":{"line":182,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":22},"generated":{"line":182,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":25},"generated":{"line":182,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":30},"generated":{"line":182,"column":30}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":25},"generated":{"line":182,"column":36}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":37},"generated":{"line":182,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":25},"generated":{"line":182,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":175,"column":4},"generated":{"line":182,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":4},"generated":{"line":183,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":4},"generated":{"line":183,"column":6}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":16},"generated":{"line":183,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":17},"generated":{"line":183,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":4},"generated":{"line":183,"column":27}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":28},"generated":{"line":183,"column":30}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":176,"column":4},"generated":{"line":183,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":4},"generated":{"line":185,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":8},"generated":{"line":185,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":13},"generated":{"line":185,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":8},"generated":{"line":185,"column":31}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":33},"generated":{"line":185,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":8},"generated":{"line":185,"column":39}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":41},"generated":{"line":185,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":46},"generated":{"line":185,"column":48}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":41},"generated":{"line":185,"column":64}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":66},"generated":{"line":185,"column":68}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":4},"generated":{"line":185,"column":76}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":178,"column":76},"generated":{"line":185,"column":78}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":6},"generated":{"line":186,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":11},"generated":{"line":186,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":6},"generated":{"line":186,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":18},"generated":{"line":186,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":6},"generated":{"line":186,"column":26}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":25},"generated":{"line":186,"column":27}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":6},"generated":{"line":186,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":32},"generated":{"line":186,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":179,"column":6},"generated":{"line":186,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":6},"generated":{"line":188,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":6},"generated":{"line":188,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":18},"generated":{"line":188,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":19},"generated":{"line":188,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":6},"generated":{"line":188,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":27},"generated":{"line":188,"column":29}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":180,"column":6},"generated":{"line":188,"column":33}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":6},"generated":{"line":189,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":6},"generated":{"line":189,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":18},"generated":{"line":189,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":19},"generated":{"line":189,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":6},"generated":{"line":189,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":27},"generated":{"line":189,"column":29}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":181,"column":6},"generated":{"line":189,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":182,"column":5},"generated":{"line":190,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":183,"column":3},"generated":{"line":191,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":185,"column":27},"generated":{"line":194,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":185,"column":46},"generated":{"line":194,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":185,"column":46},"generated":{"line":195,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":4},"generated":{"line":197,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":10},"generated":{"line":197,"column":10}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":28},"generated":{"line":197,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":31},"generated":{"line":197,"column":31}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":10},"generated":{"line":197,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":31},"generated":{"line":197,"column":58}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":43},"generated":{"line":197,"column":61}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":187,"column":6},"generated":{"line":198,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":187,"column":6},"generated":{"line":198,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":187,"column":10},"generated":{"line":198,"column":14}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":187,"column":11},"generated":{"line":198,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":187,"column":6},"generated":{"line":198,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":6},"generated":{"line":200,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":10},"generated":{"line":200,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":14},"generated":{"line":200,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":15},"generated":{"line":200,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":10},"generated":{"line":200,"column":46}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":45},"generated":{"line":200,"column":49}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":6},"generated":{"line":200,"column":50}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":189,"column":48},"generated":{"line":200,"column":52}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":190,"column":8},"generated":{"line":201,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":191,"column":8},"generated":{"line":202,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":192,"column":7},"generated":{"line":203,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":6},"generated":{"line":205,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":6},"generated":{"line":205,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":10},"generated":{"line":205,"column":14}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":11},"generated":{"line":205,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":6},"generated":{"line":205,"column":31}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":30},"generated":{"line":205,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":194,"column":6},"generated":{"line":205,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":6},"generated":{"line":207,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":10},"generated":{"line":207,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":14},"generated":{"line":207,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":15},"generated":{"line":207,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":10},"generated":{"line":207,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":22},"generated":{"line":207,"column":26}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":10},"generated":{"line":207,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":33},"generated":{"line":207,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":6},"generated":{"line":207,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":196,"column":36},"generated":{"line":207,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":197,"column":8},"generated":{"line":208,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":198,"column":7},"generated":{"line":209,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":6},"generated":{"line":211,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":6},"generated":{"line":211,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":211,"column":14}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":11},"generated":{"line":211,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":6},"generated":{"line":211,"column":31}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":30},"generated":{"line":211,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":34},"generated":{"line":211,"column":40}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":35},"generated":{"line":211,"column":41}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":30},"generated":{"line":211,"column":47}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":9},"generated":{"line":211,"column":48}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":30},"generated":{"line":211,"column":54}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":16},"generated":{"line":211,"column":55}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":17},"generated":{"line":211,"column":65}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":16},"generated":{"line":211,"column":68}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":38},"generated":{"line":211,"column":70}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":16},"generated":{"line":211,"column":73}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":201,"column":45},"generated":{"line":211,"column":75}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":10},"generated":{"line":212,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":17},"generated":{"line":212,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":20},"generated":{"line":212,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":24},"generated":{"line":212,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":17},"generated":{"line":212,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":32},"generated":{"line":212,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":35},"generated":{"line":212,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":38},"generated":{"line":212,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":41},"generated":{"line":212,"column":41}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":42},"generated":{"line":212,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":17},"generated":{"line":212,"column":50}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":53},"generated":{"line":212,"column":53}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":56},"generated":{"line":212,"column":56}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":57},"generated":{"line":212,"column":57}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":17},"generated":{"line":212,"column":65}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":203,"column":53},"generated":{"line":212,"column":68}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":202,"column":10},"generated":{"line":212,"column":71}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":204,"column":9},"generated":{"line":213,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":30},"generated":{"line":213,"column":9}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":204,"column":11},"generated":{"line":213,"column":11}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":30},"generated":{"line":213,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":200,"column":6},"generated":{"line":213,"column":16}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":6},"generated":{"line":215,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":11},"generated":{"line":215,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":15},"generated":{"line":215,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":16},"generated":{"line":215,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":19},"generated":{"line":215,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":6},"generated":{"line":215,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":22},"generated":{"line":215,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":23},"generated":{"line":215,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":26},"generated":{"line":215,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":30},"generated":{"line":215,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":31},"generated":{"line":215,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":26},"generated":{"line":215,"column":41}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":38},"generated":{"line":215,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":6},"generated":{"line":215,"column":48}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":46},"generated":{"line":215,"column":50}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":47},"generated":{"line":215,"column":51}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":6},"generated":{"line":215,"column":53}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":206,"column":51},"generated":{"line":215,"column":55}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":8},"generated":{"line":216,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":14},"generated":{"line":216,"column":14}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":17},"generated":{"line":216,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":20},"generated":{"line":216,"column":20}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":24},"generated":{"line":216,"column":26}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":25},"generated":{"line":216,"column":27}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":20},"generated":{"line":216,"column":33}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":32},"generated":{"line":216,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":20},"generated":{"line":216,"column":35}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":207,"column":8},"generated":{"line":216,"column":36}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":8},"generated":{"line":218,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":12},"generated":{"line":218,"column":14}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":15},"generated":{"line":218,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":16},"generated":{"line":218,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":12},"generated":{"line":218,"column":26}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":29},"generated":{"line":218,"column":31}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":33},"generated":{"line":218,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":34},"generated":{"line":218,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":8},"generated":{"line":218,"column":54}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":208,"column":52},"generated":{"line":218,"column":56}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":10},"generated":{"line":219,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":10},"generated":{"line":219,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":14},"generated":{"line":219,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":15},"generated":{"line":219,"column":19}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":10},"generated":{"line":219,"column":25}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":22},"generated":{"line":219,"column":26}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":10},"generated":{"line":219,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":29},"generated":{"line":219,"column":33}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":10},"generated":{"line":219,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":32},"generated":{"line":219,"column":36}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":209,"column":10},"generated":{"line":219,"column":37}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":210,"column":10},"generated":{"line":221,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":210,"column":10},"generated":{"line":221,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":210,"column":11},"generated":{"line":221,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":222,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":222,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":13},"generated":{"line":222,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":14},"generated":{"line":222,"column":16}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":222,"column":23}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":22},"generated":{"line":222,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":222,"column":28}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":10},"generated":{"line":223,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":10},"generated":{"line":223,"column":12}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":13},"generated":{"line":223,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":14},"generated":{"line":223,"column":16}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":10},"generated":{"line":223,"column":23}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":22},"generated":{"line":223,"column":24}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":212,"column":10},"generated":{"line":223,"column":32}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":213,"column":9},"generated":{"line":224,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":214,"column":7},"generated":{"line":225,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":215,"column":5},"generated":{"line":226,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":186,"column":4},"generated":{"line":226,"column":7}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":217,"column":4},"generated":{"line":228,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":217,"column":9},"generated":{"line":228,"column":11}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":217,"column":4},"generated":{"line":228,"column":38}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":218,"column":4},"generated":{"line":229,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":218,"column":11},"generated":{"line":229,"column":13}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":218,"column":14},"generated":{"line":229,"column":16}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":14},"generated":{"line":229,"column":17}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":218,"column":11},"generated":{"line":229,"column":21}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":19},"generated":{"line":229,"column":22}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":19},"generated":{"line":229,"column":33}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":19},"generated":{"line":229,"column":34}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":19},"generated":{"line":229,"column":42}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":28},"generated":{"line":229,"column":43}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":219,"column":19},"generated":{"line":229,"column":61}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":218,"column":11},"generated":{"line":229,"column":62}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":218,"column":4},"generated":{"line":229,"column":63}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":220,"column":3},"generated":{"line":230,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":236,"column":0}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":236,"column":7}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":236,"column":8}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":236,"column":15}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":236,"column":18}},{"source":"../../../core/pipelines/segment/prioritizer.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":236,"column":39}}],"sources":{"../../../core/pipelines/segment/prioritizer.ts":"/**\n * Copyright 2015 CANAL+ Group\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  defer as observableDefer,\n  Observable,\n  Subject,\n} from \"rxjs\";\nimport {\n  finalize,\n  mergeMap,\n} from \"rxjs/operators\";\nimport arrayFindIndex from \"../../../utils/array_find_index\";\n\n/**\n * Create Observables which can be priorized between one another.\n *\n * With this class, you can create Observables with linked priority numbers.\n * The lower this number is, the more priority the resulting Observable will\n * have.\n *\n * Such Observable will then basically wait for pending Observables with more\n * priority to finish before \"starting\".\n *\n * You can also update the priority of an already-created Observable.\n * This will only have an effect if the Observable is currently \"waiting\" for\n * its turn (started observable won't be canceled if their priority were\n * lowered).\n *\n * ```js\n * const prioritizer = new ObservablePrioritizer();\n *\n * const observable1 = Observable.of(1);\n * const observable2 = Observable.of(2);\n * const observable3 = Observable.of(3);\n * const observable4 = Observable.of(4);\n * const observable5 = Observable.of(5);\n *\n * const pObservable1 = prioritizer.create(observable1, 4);\n * const pObservable2 = prioritizer.create(observable2, 2);\n * const pObservable3 = prioritizer.create(observable3, 1);\n * const pObservable4 = prioritizer.create(observable4, 3);\n * const pObservable5 = prioritizer.create(observable5, 2);\n *\n * // start every Observables at the same time\n * observableMerge(\n *   pObservable1,\n *   pObservable2,\n *   pObservable3,\n *   pObservable4,\n *   pObservable5\n * ).subscribe((i) => {\n *   // To spice things up, update pObservable1 priority to go before\n *   // pObservable4\n *   if (i === 5) { // if pObservable5 is currently emitting\n *     prioritizer.updatePriority(pObservable1, 1);\n *   }\n *   console.log(i);\n * });\n *\n * // Result:\n * // 3\n * // 2\n * // 5\n * // 1\n * // 4\n *\n * // Note: here \"1\" goes before \"4\" only because the former's priority has been\n * // updated before the latter was started.\n * // It would be the other way around if not.\n * ```\n *\n * @class ObservablePrioritizer\n */\nexport default class ObservablePrioritizer<T> {\n  /**\n   * Priority of the Observables currently running.\n   * Null if no Observable is currently running.\n   * @type {Number|null}\n   * @private\n   */\n  private _pendingPriority : number | null;\n\n  /**\n   * Number of Observables currently running.\n   * @type {Number|null}\n   * @private\n   */\n  private _numberOfPendingObservables : number;\n\n  /**\n   * Queue of Observables currently waiting for more prioritary Observables\n   * to finish.\n   * @type {Array.<Object>}\n   * @private\n   */\n  private _queue : Array<{ observable : Observable<T>;\n                           trigger : Subject<void>;\n                           priority : number; }>;\n\n  constructor() {\n    this._pendingPriority = null;\n    this._numberOfPendingObservables = 0;\n    this._queue = [];\n  }\n\n  /**\n   * Create a priorized Observable from a base Observable.\n   *\n   * When subscribed to, this Observable will have its priority compared to\n   * all the already-running Observables created from this class.\n   * Only if this number is inferior or equal to the priority of the\n   * currently-running Observables will it be immediately started.\n   * In the opposite case, we will wait for higher-priority Observables to\n   * finish before starting it.\n   *\n   * Note that while this Observable is waiting for its turn, it is possible\n   * to update its property through the updatePriority method, by providing\n   * the Observable returned by this function and its new priority number.\n   *\n   * @param {Observable} obs\n   * @param {number} priority\n   * @returns {Observable}\n   */\n  public create(obs : Observable<T>, priority : number) : Observable<T> {\n    const pObs$ = observableDefer(() => {\n      if (this._pendingPriority == null || this._pendingPriority >= priority) {\n        // Update the priority and start immediately the Observable\n        this._pendingPriority = priority;\n        return this._startObservable(obs);\n      } else {\n        const trigger = new Subject<void>();\n        this._queue.push({ observable: pObs$, priority, trigger });\n        return trigger\n          .pipe(mergeMap(() => this._startObservable(obs)));\n      }\n    });\n    return pObs$;\n  }\n\n  /**\n   * Update the priority of an Observable created through the create method.\n   *\n   * Note that this will only have an effect on Observable which are not yet\n   * started.\n   * This means it will only have an effect on:\n   *   - unsubscribed Observables\n   *   - Observables waiting for Observables with an higher priority to\n   *     finish\n   *\n   * @param {Observable} obs\n   * @param {number} priority\n   */\n  public updatePriority(obs : Observable<T>, priority : number) : void {\n    const index = arrayFindIndex(this._queue,\n                                 (elt) => elt.observable === obs);\n\n    if (index < 0) {\n      return;\n    }\n\n    const queueElement = this._queue[index];\n    queueElement.priority = priority;\n\n    if (this._pendingPriority == null || this._pendingPriority >= priority) {\n      this._queue.splice(index, 1);\n      queueElement.trigger.next();\n      queueElement.trigger.complete();\n    }\n  }\n\n  private _startObservable(obs : Observable<T>) : Observable<T> {\n    const onObservableFinish = () : void => {\n      this._numberOfPendingObservables--;\n\n      if (this._numberOfPendingObservables > 0) {\n        // still waiting for Observables to finish\n        return;\n      }\n\n      this._pendingPriority = null;\n\n      if (this._queue.length === 0) {\n        return;\n      }\n\n      this._pendingPriority = this._queue\n        .reduce((acc : number | null, elt) => {\n          return acc == null || acc > elt.priority ? elt.priority :\n                                                     acc;\n        }, null);\n\n      for (let i = 0; i < this._queue.length; i++) {\n        const elt = this._queue[i];\n        if (elt.priority === this._pendingPriority) {\n          this._queue.splice(i, 1);\n          i--;\n          elt.trigger.next();\n          elt.trigger.complete();\n        }\n      }\n    };\n\n    this._numberOfPendingObservables++;\n    return obs\n             .pipe(finalize(onObservableFinish));\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"754761539958cd4c43cf8738a415c5bb","cacheData":{"env":{}}}